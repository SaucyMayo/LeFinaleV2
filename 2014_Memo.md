# 2014 Computer Science 244 - Semester Test 2 Memo

**Date:** 2014-11-17 | **Examiner:** Willem Bester

---

## Complete Answer Guide

### Section 1: Multiple Choice

**Intel Architecture:**
- Instructions modifying ESP: call, push, pop, ret
- Instructions not affecting ESP: cmp, test, mov, add, sub (non-stack operations)

**Mic-1 Microarchitecture:**
- Register TOS holds stack top value
- H register always right operand in ALU
- Cannot encode: H = MDR - H (wrong operand order)
- Microcode branch on N/Z flags

**Memory Management:**
- Proportional allocation: frames ÷ total_pages × process_pages
- Second-chance eviction order: (0,0) → (0,1) → (1,0) → (1,1)

**Pipeline Dependencies:**
- RAW: Read After Write (true dependency)
- WAR: Write After Read (anti-dependency)
- WAW: Write After Write (output dependency)

### Section 2: Calculations

**ALU Control Table:**
```
Function  | F0 | F1 | ena | inva | inc |
----------|----|----|-----|------|-----|
A+B       | 1  | 1  | 1   | 0    | 0   |
A+B+1     | 1  | 1  | 1   | 0    | 1   |
B-A       | 1  | 1  | 1   | 1    | 1   | (two's complement)
-A        | 1  | 1  | 0   | 1    | 1   | (negate)
```

**Page Replacement:**
For any reference string:
1. LRU: Evict least recently used page
2. FIFO: Evict oldest loaded page
3. Track each reference, mark faults
4. Compare fault counts between algorithms
5. Belady's Anomaly: FIFO may worsen with more frames

### Section 3: Conceptual Questions

**Mic-1 Data Path Subcycles:**
1. **Memory:** Fetch/store if needed (MAR/MDR)
2. **Register Read:** Drive selected register onto B bus
3. **ALU/Shift:** Compute result, generate N/Z flags
4. **Writeback:** Store result from C bus to destination(s)

**Performance Optimization:**
- Increase clock frequency (limited by memory speed)
- Pipelining (parallel execution of stages)
- Cache memory (exploit locality)
- Branch prediction (reduce control hazards)

**Memory Hierarchy:**
- **Registers:** Fastest, smallest (CPU)
- **Cache:** Fast, small (SRAM)
- **Main memory:** Medium, large (DRAM)
- **Disk:** Slow, huge (magnetic/SSD)

**Virtual Memory:**
- Demand paging: Load pages on demand
- TLB: Cache for address translations
- Page replacement: LRU, FIFO, Clock
- Thrashing: Excessive paging activity

**File Systems:**
- **Unix inodes:** Direct + indirect + double + triple pointers
- **FAT:** Linked list via allocation table
- **Comparison:** Inodes better for random access and large files

Total: Variable marks (calculated out of 80)
