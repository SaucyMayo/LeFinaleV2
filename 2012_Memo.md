# 2012 Computer Science 244 - Semester Test 2 Memo

**Date:** 2012-11-19 | **Examiner:** Willem Bester

---

## Full Solutions

### Core Concepts

**Computer Architecture:**
- **Levels:** Digital logic → Microarchitecture → ISA → OS → Applications
- **Mic-1:** Microarchitecture implementing IJVM instruction set
- **Von Neumann:** Stored program, single memory for code and data

**Instruction Set Architecture:**
- **Intel:** x86/x86-64, CISC, complex instructions
- **Registers:** General purpose, segment, stack pointer, flags
- **Addressing:** Direct, indirect, indexed, relative

**Microarchitecture:**
- **Data path:** Registers, ALU, buses
- **Control:** Microprogram or hardwired
- **Timing:** Clock cycles, subcycles

### Common Questions

**1. Multiple Choice - Intel Instructions**
- call: Pushes return address (modifies ESP)
- push: Pushes operand (modifies ESP)
- pop: Pops to operand (modifies ESP)
- ret: Pops return address (modifies ESP)
- cmp: Compare only (NO ESP change) ✓
- test: Bitwise AND, set flags (NO ESP change) ✓
- mov: Move data (NO ESP change unless ESP is destination)

**2. Mic-1 Encoding Constraints**
- H register must be right operand in ALU
- Valid: H = H ± MDR, H = MDR + H
- Invalid: H = MDR - H (wrong order)

**3. Memory Allocation**
- Proportional: Based on process size ratio
- Equal: Same frames to all processes
- Priority: Based on process priority
- Working set: Based on recent page usage

**4. Pipeline Dependencies**
```
R1 = R2 op R3  (writes R1)
R4 = R5 op R1  (reads R1)
→ RAW dependency
```

**5. Page Replacement**
- (0,0): Not referenced, clean → Evict first ✓
- (0,1): Not referenced, dirty → Evict second
- (1,0): Referenced, clean → Evict third
- (1,1): Referenced, dirty → Keep if possible

### Calculation Examples

**Page Replacement - Example:**
Reference: 1,2,3,4,1,2,5,1,2,3,4,5 (3 frames)

LRU:
```
Frame 1: 1 1 1 4 4 4 4 4 4 3 3 3
Frame 2:   2 2 2 1 1 1 1 1 1 4 4
Frame 3:     3 3 3 2 5 5 5 5 5 5
Faults:  F F F F F F F - - F F F = 9 faults
```

FIFO:
```
Frame 1: 1 1 1 4 4 4 5 5 5 3 3 3
Frame 2:   2 2 2 1 1 1 1 2 2 2 4
Frame 3:     3 3 3 2 2 2 2 2 4 4
Faults:  F F F F F F F - F F F F = 10 faults
```

**ALU Control - Standard Table:**
See previous memos for detailed ALU control signal tables.

### Long Answer Topics

**Memory Management:**
- **Paging pros:** No external fragmentation, simple allocation
- **Paging cons:** Internal fragmentation, overhead
- **Segmentation pros:** Logical units, easy sharing
- **Segmentation cons:** External fragmentation, complex

**Cache Performance:**
```
Hit rate = hits / (hits + misses)
Miss rate = 1 - hit rate
Average access time = hit_time × hit_rate + miss_penalty × miss_rate
```

**File Systems:**
- **Allocation:** Contiguous, linked, indexed
- **Directories:** Hierarchical tree structure
- **Links:** Hard (inode ref count) vs Soft (path string)

Total: Variable marks (calculated out of 80)
